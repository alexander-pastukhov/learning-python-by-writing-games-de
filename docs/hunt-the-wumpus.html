<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Kapitel 9 Hunt the Wumpus | Lerne Python, indem du Spiele entwickels</title>
<meta name="author" content="Alexander (Sasha) Pastukhov">
<meta name="description" content="Today we will program a text adventure computer game Hunt the Wumpus: “In the game, the player moves through a series of connected caves, arranged in a dodecahedron, as they hunt a monster named...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="Kapitel 9 Hunt the Wumpus | Lerne Python, indem du Spiele entwickels">
<meta property="og:type" content="book">
<meta property="og:url" content="https://alexander-pastukhov.github.io/writing-games-with-python-and-psychopy/hunt-the-wumpus.html">
<meta property="og:description" content="Today we will program a text adventure computer game Hunt the Wumpus: “In the game, the player moves through a series of connected caves, arranged in a dodecahedron, as they hunt a monster named...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kapitel 9 Hunt the Wumpus | Lerne Python, indem du Spiele entwickels">
<meta name="twitter:site" content="@PastukhovSasha">
<meta name="twitter:description" content="Today we will program a text adventure computer game Hunt the Wumpus: “In the game, the player moves through a series of connected caves, arranged in a dodecahedron, as they hunt a monster named...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link rel="shortcut icon" href="images/psychopy-python-favicon.svg">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-NBXRG6YB3R"></script><script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-TMHDLSM1CE');
      </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Lerne Python, indem du Spiele entwickels</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Einleitung</a></li>
<li><a class="" href="Software.html"><span class="header-section-number">2</span> Software</a></li>
<li><a class="" href="programming-tips.html"><span class="header-section-number">3</span> Programmier-Tipps und -Tricks</a></li>
<li><a class="" href="python-grundlagen.html"><span class="header-section-number">4</span> Python Grundlagen</a></li>
<li><a class="" href="guess-the-number-single-round.html"><span class="header-section-number">5</span> Errate die Zahl: eine einzelne Runden Edition</a></li>
<li><a class="" href="guess-the-number-multi-round.html"><span class="header-section-number">6</span> Errate die Zahl: Eine Mehr-Runden-Ausgabe</a></li>
<li><a class="" href="guess-the-number-ai.html"><span class="header-section-number">7</span> Guess the Number: KI ist dran</a></li>
<li><a class="" href="One-armed-bandit.html"><span class="header-section-number">8</span> One-armed bandit but with lists and loops</a></li>
<li><a class="active" href="hunt-the-wumpus.html"><span class="header-section-number">9</span> Hunt the Wumpus</a></li>
<li><a class="" href="guess-the-animal.html"><span class="header-section-number">10</span> Guess the animal</a></li>
<li><a class="" href="Sudoku.html"><span class="header-section-number">11</span> Sudoku</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/alexander-pastukhov/learning-python-by-writing-games-de">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="hunt-the-wumpus" class="section level1" number="9">
<h1>
<span class="header-section-number">Kapitel 9</span> Hunt the Wumpus<a class="anchor" aria-label="anchor" href="#hunt-the-wumpus"><i class="fas fa-link"></i></a>
</h1>
<p>Today we will program a text adventure computer game <a href="https://en.wikipedia.org/wiki/Hunt_the_Wumpus">Hunt the Wumpus</a>: “In the game, the player moves through a series of connected caves, arranged in a dodecahedron, as they hunt a monster named the Wumpus. The turn-based game has the player trying to avoid fatal bottomless pits and”super bats” that will move them around the cave system; the goal is to fire one of their “crooked arrows” through the caves to kill the Wumpus…”</p>
<p>As before, we will start with a very basic program and will build it step-by-step towards the final version. The purpose of this chapter is to consolidate the skills you already have by using them in a more complex game with multiple functions, game objects, etc. Do not forget to comment the entire file (top multiline comment to explain what this will be about), structure your code, comment individual chunks, and use sensible variable and function names. Your code complexity will be pretty high, so you will need the good style to help you with it.</p>
<div id="chapter-concepts-1" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> Chapter concepts<a class="anchor" aria-label="anchor" href="#chapter-concepts-1"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Using <a href="hunt-the-wumpus.html#sets">sets</a>.</li>
</ul>
</div>
<div id="a-system-of-caves" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> A system of caves<a class="anchor" aria-label="anchor" href="#a-system-of-caves"><i class="fas fa-link"></i></a>
</h2>
<p>In our game, the player will wander through a systems of caves with each cave being connected to three other caves. The cave layout will be a <em>CONSTANT</em>, so we will define at the beginning of the program as follows.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb76-1"><a href="hunt-the-wumpus.html#cb76-1" tabindex="-1"></a>CONNECTED_CAVES <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>], [<span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">7</span>], [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">9</span>], [<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">11</span>], </span>
<span id="cb76-2"><a href="hunt-the-wumpus.html#cb76-2" tabindex="-1"></a>                   [<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">13</span>], [<span class="dv">6</span>, <span class="dv">14</span>, <span class="dv">0</span>], [<span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">15</span>], [<span class="dv">8</span>, <span class="dv">6</span>, <span class="dv">1</span>], </span>
<span id="cb76-3"><a href="hunt-the-wumpus.html#cb76-3" tabindex="-1"></a>                   [<span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">16</span>], [<span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">2</span>], [<span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">17</span>], [<span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">3</span>], </span>
<span id="cb76-4"><a href="hunt-the-wumpus.html#cb76-4" tabindex="-1"></a>                   [<span class="dv">13</span>, <span class="dv">11</span>, <span class="dv">18</span>], [<span class="dv">14</span>, <span class="dv">12</span>, <span class="dv">4</span>], [<span class="dv">5</span>, <span class="dv">13</span>, <span class="dv">19</span>], [<span class="dv">16</span>, <span class="dv">19</span>, <span class="dv">6</span>], </span>
<span id="cb76-5"><a href="hunt-the-wumpus.html#cb76-5" tabindex="-1"></a>                   [<span class="dv">17</span>, <span class="dv">15</span>, <span class="dv">8</span>], [<span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">10</span>], [<span class="dv">19</span>, <span class="dv">17</span>, <span class="dv">12</span>], [<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">14</span>]]</span></code></pre></div>
<p>Let us decipher this. You have a list of twenty elements (caves). Inside each element is a list of connected caves (caves you can travel to). This means, that if you are in cave #1 (index <code>0</code>), it is connected to <code>CAVES[0]</code> → <code>[1, 4, 5]</code> (note that these numbers inside are zero-based indexes as well!). So, to see what is the index of the second cave connected to the first one you would write <code>CAVES[0][1]</code> (you get first element of the list and, then, the second element of the list from inside).</p>
<p>To allow the player to wander, we need to know where they are to begin with. Let us define a new variable called, simply, <code>player_location</code> and assign a random integer with a <em>valid</em> cave index. Think about the lowest valid index you can have in Python (this you need to hardcode). To compute the highest possible valid index, you need to know the total number of the caves, i.e., length — <a href="https://docs.python.org/3/library/functions.html#len">len()</a> — of the list. Remember, the indexes in Python are zero-based, so think how to compute highest valid index from the length! Use these two indexes and put the player into a random cave. For this, you can use <a href="https://docs.python.org/3/library/random.html#random.randint">randint</a> function. Look at previous chapters, if you forgot how to use it.</p>
<p>Our player needs to know where they can go, so on each turn we will need to print out the information about which cave the player is in and about the connecting cave (use <a href="python-grundlagen.html#string-formatting">string formatting</a> to make this look nice). Let this be our first code snippet for the game. The code should look like this</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb77-1"><a href="hunt-the-wumpus.html#cb77-1" tabindex="-1"></a><span class="co"># import randint</span></span>
<span id="cb77-2"><a href="hunt-the-wumpus.html#cb77-2" tabindex="-1"></a></span>
<span id="cb77-3"><a href="hunt-the-wumpus.html#cb77-3" tabindex="-1"></a><span class="co"># define CONNECTED_CAVES (simply copy-paste the definition)</span></span>
<span id="cb77-4"><a href="hunt-the-wumpus.html#cb77-4" tabindex="-1"></a></span>
<span id="cb77-5"><a href="hunt-the-wumpus.html#cb77-5" tabindex="-1"></a><span class="co"># create `player_location` variable and set it to a random valid index </span></span>
<span id="cb77-6"><a href="hunt-the-wumpus.html#cb77-6" tabindex="-1"></a><span class="co"># putting player into a random cave</span></span>
<span id="cb77-7"><a href="hunt-the-wumpus.html#cb77-7" tabindex="-1"></a></span>
<span id="cb77-8"><a href="hunt-the-wumpus.html#cb77-8" tabindex="-1"></a><span class="co"># print out the current cave index and indexes of the connected caves. Use string formatting.</span></span></code></pre></div>
<div class="program">
<p>Put your code into <em>code01.py</em>.</p>
</div>
</div>
<div id="wandering-around" class="section level2" number="9.3">
<h2>
<span class="header-section-number">9.3</span> Wandering around<a class="anchor" aria-label="anchor" href="#wandering-around"><i class="fas fa-link"></i></a>
</h2>
<p>Now that the player can “see” where they are, let them wander! Use <code>input()</code> function to ask for the index of the cave the player wants to go to and “move” the player to that cave (which variable do you need to modify?). Remember that <code>input()</code> returns a string, so you will need to explicitly convert it to an integer (see <a href="guess-the-number-single-round.html#guess-the-number-single-round">Guess-the-Number</a> game, if you forgot how to do it). For now, enter only valid numbers, as we will add checks later. To make wandering continuous, put it inside the <a href="guess-the-number-multi-round.html#while-loop">while loop</a>, so that player wanders until they get to the cave #5 (index <code>4</code>!). We will have more sensible game-over conditions later on but this will allow you to exit the game without interrupting it from outside. The code should look like this (remember to watch your indentations!).</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="hunt-the-wumpus.html#cb78-1" tabindex="-1"></a><span class="co"># import randint function</span></span>
<span id="cb78-2"><a href="hunt-the-wumpus.html#cb78-2" tabindex="-1"></a></span>
<span id="cb78-3"><a href="hunt-the-wumpus.html#cb78-3" tabindex="-1"></a><span class="co"># define CONNECTED_CAVES (simply copy-paste the definition)</span></span>
<span id="cb78-4"><a href="hunt-the-wumpus.html#cb78-4" tabindex="-1"></a></span>
<span id="cb78-5"><a href="hunt-the-wumpus.html#cb78-5" tabindex="-1"></a><span class="co"># create `player_location` variable and set it to a random valid cave index</span></span>
<span id="cb78-6"><a href="hunt-the-wumpus.html#cb78-6" tabindex="-1"></a></span>
<span id="cb78-7"><a href="hunt-the-wumpus.html#cb78-7" tabindex="-1"></a><span class="co"># while player is not in the cave #5 (index 4):</span></span>
<span id="cb78-8"><a href="hunt-the-wumpus.html#cb78-8" tabindex="-1"></a>    <span class="co"># print out the current location and list of the connected caves. Use string formatting.</span></span>
<span id="cb78-9"><a href="hunt-the-wumpus.html#cb78-9" tabindex="-1"></a>    <span class="co"># get input about the cave the player want to go to and "move" the player</span></span>
<span id="cb78-10"><a href="hunt-the-wumpus.html#cb78-10" tabindex="-1"></a>    </span>
<span id="cb78-11"><a href="hunt-the-wumpus.html#cb78-11" tabindex="-1"></a><span class="co"># print a nice game-over message</span></span></code></pre></div>
<div class="program">
<p>Put your code into <em>code02.py</em>.</p>
</div>
</div>
<div id="checking-whether-a-value-is-in-the-listin-collection" class="section level2" number="9.4">
<h2>
<span class="header-section-number">9.4</span> Checking whether a value is <em>in</em> the list[#in-collection]<a class="anchor" aria-label="anchor" href="#checking-whether-a-value-is-in-the-listin-collection"><i class="fas fa-link"></i></a>
</h2>
<p>Right now we trust the player (well, you) to enter the correct index for the cave. Thus, the program will move a player to a new cave even if you enter an index of the cave that is not connected to the current one. Even worse, it will try to move the player to an undefined cave, if you enter an index larger than 19. To check whether an entered index matches one of the connected cave, you need to use <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-conditions"><value> in <list></list></value></a> conditional statement. The idea is straightforward, if the value is in the list, the statement is <code>True</code>, if not, it is <code>False</code>.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb79-1"><a href="hunt-the-wumpus.html#cb79-1" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb79-2"><a href="hunt-the-wumpus.html#cb79-2" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">1</span> <span class="kw">in</span> x)</span>
<span id="cb79-3"><a href="hunt-the-wumpus.html#cb79-3" tabindex="-1"></a><span class="co">#&gt; True</span></span>
<span id="cb79-4"><a href="hunt-the-wumpus.html#cb79-4" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">4</span> <span class="kw">in</span> x)</span>
<span id="cb79-5"><a href="hunt-the-wumpus.html#cb79-5" tabindex="-1"></a><span class="co">#&gt; False</span></span></code></pre></div>
<p>Note that you can check <em>one</em> value/object at a time. Because a list is also a single object, you will be checking whether it is an element of the other list, not whether all or some of it elements are in it.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="hunt-the-wumpus.html#cb80-1" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, [<span class="dv">3</span>, <span class="dv">4</span>]]</span>
<span id="cb80-2"><a href="hunt-the-wumpus.html#cb80-2" tabindex="-1"></a><span class="co"># This is False because x has no element [1, 2], only 1, and 2 (separately)</span></span>
<span id="cb80-3"><a href="hunt-the-wumpus.html#cb80-3" tabindex="-1"></a><span class="bu">print</span>([<span class="dv">1</span>, <span class="dv">2</span>] <span class="kw">in</span> x)</span>
<span id="cb80-4"><a href="hunt-the-wumpus.html#cb80-4" tabindex="-1"></a><span class="co">#&gt; False</span></span>
<span id="cb80-5"><a href="hunt-the-wumpus.html#cb80-5" tabindex="-1"></a></span>
<span id="cb80-6"><a href="hunt-the-wumpus.html#cb80-6" tabindex="-1"></a><span class="co"># This is True because x has [3, 4] element</span></span>
<span id="cb80-7"><a href="hunt-the-wumpus.html#cb80-7" tabindex="-1"></a><span class="bu">print</span>([<span class="dv">3</span>, <span class="dv">4</span>] <span class="kw">in</span> x)</span>
<span id="cb80-8"><a href="hunt-the-wumpus.html#cb80-8" tabindex="-1"></a><span class="co">#&gt; True</span></span></code></pre></div>
<div class="practice">
<p>Do exercise #1.</p>
</div>
</div>
<div id="checking-valid-cave-index" class="section level2" number="9.5">
<h2>
<span class="header-section-number">9.5</span> Checking valid cave index<a class="anchor" aria-label="anchor" href="#checking-valid-cave-index"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you know how to check whether a value is in the list, let’s use it to validate cave index. Before moving the player, you now need to check whether the entered index is in the list of the connected caves. If this is <code>True</code>, you move the player as before. Otherwise, print out an error message, e.g. “Wrong cave index!” without moving a player. Loop will ensure that the player will be prompted for the input again, so we don’t need to worry about this for the moment. Here, you will need to create a temporary variable to store the player’s input as you need to check it validity <em>before</em> you decide whether you move the player. You only do the latter, if the value in that temporary variable is an index of one of the connected caves!</p>
<p>Modify your code to include input-validity check.</p>
<div class="program">
<p>Put your code into <em>code03.py</em>.</p>
</div>
</div>
<div id="checking-that-string-can-be-converted-to-an-integer" class="section level2" number="9.6">
<h2>
<span class="header-section-number">9.6</span> Checking that string can be converted to an integer<a class="anchor" aria-label="anchor" href="#checking-that-string-can-be-converted-to-an-integer"><i class="fas fa-link"></i></a>
</h2>
<p>There is another danger with out input: The player is not guaranteed to enter a valid integer! So far we relied on you to behave but in real life, even when people do not deliberately try to break your program, they will occasionally press the wrong button. Thus, we need to check that the <em>string</em> that they entered can be converted to an <em>integer</em>.</p>
<p>Python string is an object (more on that in a few chapters) with different methods that allow to perform various operations on them. One subset of methods allows you to make a rough check of its content. The one we are interested is <a href="https://docs.python.org/3/library/stdtypes.html#str.isdigit">str.isdigit()</a> that checks whether all symbols are digits and that the string is not empty (it has at least one symbol). You can follow the link above to check other alternatives such as <code>str.islower()</code>, <code>str.isalpha()</code>, etc.</p>
<div class="practice">
<p>Do exercise #2.</p>
</div>
</div>
<div id="checking-valid-integer-input" class="section level2" number="9.7">
<h2>
<span class="header-section-number">9.7</span> Checking valid integer input<a class="anchor" aria-label="anchor" href="#checking-valid-integer-input"><i class="fas fa-link"></i></a>
</h2>
<p>Modify the code that gets the input from the user. First, store the raw string (not converted to an integer!) into an intermediate variable. Then, if that string is all digits, convert it to an integer, and then do the check that it is a valid connected cave index (moving player or printing an error message). However, if input string is not all digits, only print the error message (“Invalid cave index!”). This means you need to have an if-statement inside the if-statement!</p>
<div class="program">
<p>Put your code into <em>code04.py</em>.</p>
</div>
</div>
<div id="encapsulating-the-code-in-a-function" class="section level2" number="9.8">
<h2>
<span class="header-section-number">9.8</span> Encapsulating the code in a function<a class="anchor" aria-label="anchor" href="#encapsulating-the-code-in-a-function"><i class="fas fa-link"></i></a>
</h2>
<p>Your code has already grown in complexity with two checks on top of an input function, so it makes sense to hide this complexity by encapsulating it in a function. Let us call it <code>input_cave</code>, as it will an input for valid index of a connected cave only. You already have all the code you need, but think which parameter (or parameters?) it requires: you <em>cannot</em> access the global constant <code>CONNECTED_CAVES</code> or the global variable <code>player_location</code> directly!</p>
<p>Put the function in a separate <code>utils.py</code> file, document both the file and the function! Import and use it in the main script. Your program should run <em>exactly</em> as before!</p>
<div class="program">
<p>Put <code>input_cave</code> into <em>utils.py</em>.
<br>
Update your code in <em>code05.py</em>.</p>
</div>
</div>
<div id="sets" class="section level2" number="9.9">
<h2>
<span class="header-section-number">9.9</span> Sets<a class="anchor" aria-label="anchor" href="#sets"><i class="fas fa-link"></i></a>
</h2>
<p>So far, we had only the player to keep the track of and we were doing it by storing their location in the <code>player_location</code> variable. However, as we will add more game objects (bottomless pits, bats, the Wumpus), we need to keep the track of who-is-where, so that we don’t place them in an already occupied cave. We will use this as an opportunity to learn about <a href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset">sets</a>: an <em>unordered</em> collection of <em>unique</em> elements. These are an implementation of <a href="https://en.wikipedia.org/wiki/Set_(mathematics)">mathematical sets</a> and have properties useful for our required bookkeeping. You create a set via <a href="https://docs.python.org/3/library/stdtypes.html#set">set()</a> function and it can be either an empty set (to which you can <code>.add()</code>) or it can convert a list (or a tuple) into a set but it will drop all duplicates.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="hunt-the-wumpus.html#cb81-1" tabindex="-1"></a><span class="co"># starting from an empty set</span></span>
<span id="cb81-2"><a href="hunt-the-wumpus.html#cb81-2" tabindex="-1"></a>a_set <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb81-3"><a href="hunt-the-wumpus.html#cb81-3" tabindex="-1"></a>a_set.add(<span class="dv">1</span>)</span>
<span id="cb81-4"><a href="hunt-the-wumpus.html#cb81-4" tabindex="-1"></a><span class="bu">print</span>(a_set)</span>
<span id="cb81-5"><a href="hunt-the-wumpus.html#cb81-5" tabindex="-1"></a><span class="co">#&gt; {1}</span></span>
<span id="cb81-6"><a href="hunt-the-wumpus.html#cb81-6" tabindex="-1"></a>a_set.intersection()</span>
<span id="cb81-7"><a href="hunt-the-wumpus.html#cb81-7" tabindex="-1"></a><span class="co">#&gt; {1}</span></span>
<span id="cb81-8"><a href="hunt-the-wumpus.html#cb81-8" tabindex="-1"></a><span class="co"># converting a list to a set</span></span>
<span id="cb81-9"><a href="hunt-the-wumpus.html#cb81-9" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">set</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>]))</span>
<span id="cb81-10"><a href="hunt-the-wumpus.html#cb81-10" tabindex="-1"></a><span class="co">#&gt; {1, 2, 3}</span></span></code></pre></div>
<p>If you have two sets, you can perform various operations to find <a href="https://docs.python.org/3/library/stdtypes.html#frozenset.union">union</a>, <a href="https://docs.python.org/3/library/stdtypes.html#frozenset.intersection">intersection</a>, or <a href="https://docs.python.org/3/library/stdtypes.html#frozenset.difference">difference</a> between two sets (see <em>Basic operations</em> in the <a href="https://en.wikipedia.org/wiki/Set_(mathematics)">wikipedia</a>.</p>
<div class="practice">
<p>Do exercise #3.</p>
</div>
<p>Note that the set is <em>unordered</em>, so you cannot access its individual elements. However, you can check whether a value is <a href="#in-collection">in</a> the set the same way you do with lists</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="hunt-the-wumpus.html#cb82-1" tabindex="-1"></a>a_set <span class="op">=</span> <span class="bu">set</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>])</span>
<span id="cb82-2"><a href="hunt-the-wumpus.html#cb82-2" tabindex="-1"></a><span class="dv">3</span> <span class="kw">in</span> a_set</span>
<span id="cb82-3"><a href="hunt-the-wumpus.html#cb82-3" tabindex="-1"></a><span class="co">#&gt; True</span></span></code></pre></div>
</div>
<div id="keeping-track-of-occupied-caves" class="section level2" number="9.10">
<h2>
<span class="header-section-number">9.10</span> Keeping track of occupied caves<a class="anchor" aria-label="anchor" href="#keeping-track-of-occupied-caves"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you know about sets, keeping track of occupied caves will be easy. In the global script, we need a variable that will hold indexes of all occupied caves in a <a href="hunt-the-wumpus.html#sets">set</a> (you start with an empty set, as all caves are initially vacant). We also need a function that will generate a valid index of a vacant cave base on 1) range of valid indexes (think what is the most economic way to pass this information to the function, you can get away with just one integer) and 2) indexes of already occupied caves (we have it in the global variable that you define but, again, you <em>cannot</em> access that variable directly, so you <em>must</em> pass this information as a parameter!).</p>
<p>We will write this function twice. First, we will use a brute force method to find a vacant cave: just generate a valid random index in a loop until it is <em>not</em> in the set of occupied caves. Since it is not, this is a valid vacant cave, so you should exit the loop and return this value. Call this function <code>find_vacant_cave_bruteforce</code>, implement and document it in <code>utils.py</code>, test it by copying it into a Jupiter notebook and running it multiple times with various hard coded sets of occupied caves. Check that the valid cave is never in the occupied caves set.</p>
<div class="program">
<p>Put <code>find_vacant_cave_bruteforce</code> into <em>utils.py</em>.
<br>
Test it in exercise 4.</p>
</div>
<p>The function you wrote works, but it is very inefficient and can be quite problematic if our set of occupied caves is long, as you will need many attempts before you <em>randomly</em> find a vacant one. We can do better than this by using set operations as we can generate <a href="https://docs.python.org/3/library/functions.html#func-range">range</a>, turn it into a set, <a href="https://docs.python.org/3/tutorial/datastructures.html#sets">subtract</a> occupied caves from it (that leaves a set of unoccupied caves), and then <a href="https://docs.python.org/3/library/random.html#random.choice">choose</a> one value (but note that you need to convert a set to a <a href="https://docs.python.org/3/library/stdtypes.html#list">list</a> for this!). In the last step, we are choosing randomly but <em>only</em> from vacant caves, so we do not need loops and multiple attempts to get it right.</p>
<p>Implement <code>find_vacant_cave</code> function and test it using the same code as before. You should always get only a valid vacant cave index.</p>
<div class="program">
<p>Put <code>find_vacant_cave</code> into <em>utils.py</em>.
<br>
Test it in exercise 5.</p>
</div>
</div>
<div id="placing-bottomless-pits" class="section level2" number="9.11">
<h2>
<span class="header-section-number">9.11</span> Placing bottomless pits<a class="anchor" aria-label="anchor" href="#placing-bottomless-pits"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have the scaffolding in place, let us add bottomless pits. The idea is simple, we place two of those in random <em>vacant</em> caves, so when the player wanders into a cave with a bottomless pit, they fall down and die (game over). We will, however, warn the player, that their current cave is next to a bottomless pit, without telling them which cave it is in specifically.</p>
<p>First thing first, let us add them. For this, we will create a new constant <code>NUMBER_OF_BOTTOMLESS_PITS</code> (I suggest that we set it to <code>2</code> but you can have more or fewer of them) and a new variable (<code>bottomless_pits</code>) that will hold a set of indexes of caves with the bottomless pits in them. Add bottomless pits to using using a for loop: On each iteration get an index of an empty cave (via <code>find_empty_cave</code> function think about its parameters), add this index to both 1) <code>bottomless_pits</code> and 2) <code>occupied_caves</code> variables, so that you 1) know where bottomless pits are and 2) know which caves are occupied. Here is the code outline for the initialization part (do not copy paste the main loop just yet). See if numbers makes sense (number of caves is what you expected them to be, value are within the range, there are no duplicates, etc.)</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="hunt-the-wumpus.html#cb83-1" tabindex="-1"></a><span class="co"># create `occupied_caves` variable and initialize it to an empty set</span></span>
<span id="cb83-2"><a href="hunt-the-wumpus.html#cb83-2" tabindex="-1"></a><span class="co"># create `bottomless_pits` variable and initialize it to an empty set</span></span>
<span id="cb83-3"><a href="hunt-the-wumpus.html#cb83-3" tabindex="-1"></a><span class="co"># use for loop and range function to repeat the for loop NUMBER_OF_BOTTOMLESS_PITS times</span></span>
<span id="cb83-4"><a href="hunt-the-wumpus.html#cb83-4" tabindex="-1"></a><span class="co">#     generate a new location for the bottomless pit via find_empty_cave() function and add it to both sets</span></span></code></pre></div>
<div class="program">
<p>Test code for creating bottomless pits <br> in exercise 6.</p>
</div>
</div>
<div id="falling-into-a-bottomless-pit" class="section level2" number="9.12">
<h2>
<span class="header-section-number">9.12</span> Falling into a bottomless pit<a class="anchor" aria-label="anchor" href="#falling-into-a-bottomless-pit"><i class="fas fa-link"></i></a>
</h2>
<p>Now we will add one of the ways for the game to be over: the player falls into a bottomless pit. For this, we just need to check whether player is currently in a cave that has a bottomless pit in on every turn. If that is the case, player’s cave is indeed in the bottomless pits list, print a sad game over message and <code><a href="https://rdrr.io/r/base/Control.html">break</a></code> out of the loop. In addition, let us modify the <code>while</code> loop condition to <code>while True:</code>, so that the only way to end the game is to fall into the pit (not exactly fair to the player, but we’ll fix that later).</p>
<p>Put the code for placing bottomless pits and falling into them into the main script. Print out the bottomless pits caves at the start of the program and wonder into them to make sure that this will correctly end the game.</p>
<div class="program">
<p>Update your code in <em>code06.py</em>.</p>
</div>
</div>
<div id="warning-about-a-bottomless-pit" class="section level2" number="9.13">
<h2>
<span class="header-section-number">9.13</span> Warning about a bottomless pit<a class="anchor" aria-label="anchor" href="#warning-about-a-bottomless-pit"><i class="fas fa-link"></i></a>
</h2>
<p>We need to give the player a chance to avoid the fate of falling into a bottomless pit but warning him that one (or two, or more) are nearby. To this end, we need to print additional information <em>before</em> they decide to make their move. Your task is to check whether there is a cave that is both in <code>bottomless_pits</code> set and current connected caves list. You can use a <a href="One-armed-bandit.html#for-loop">for loop</a> but using set operations is much easier, you just need to check whether an <a href="https://docs.python.org/3/library/stdtypes.html#frozenset.intersection">intersection</a> of there two sets is empty (it has zero <a href="https://docs.python.org/3/library/functions.html#len">length</a>). If at least one of the connected caves has a bottomless pit in it, print “You feel a breeze!”.</p>
<div class="program">
<p>Put your code into <em>code07.py</em>.</p>
</div>
</div>
<div id="placing-bats-and-warning-about-them" class="section level2" number="9.14">
<h2>
<span class="header-section-number">9.14</span> Placing bats and warning about them<a class="anchor" aria-label="anchor" href="#placing-bats-and-warning-about-them"><i class="fas fa-link"></i></a>
</h2>
<p>We need more thrills! Let us add bats to the fray. They live in caves, the player can hear them, if they are in a connect cave (“You hear flapping!”), but if the player inadvertently enters the cave with bats, they carry the player to a <em>random</em> cave.</p>
<p>Placing the bats is analogous to placing bottomless pits. You need a constant that determines the number of bat colonies (e.g., <code>NUMBER_OF_BATS</code> and set it <code>2</code> or some other number you prefer), a variable that holds a set with indexes of caves with bats (e.g., <code>bats</code>), and you need to pick random empty caves and store them in <code>bats</code> in exactly the same way you did it with bottomless pits. Print out location of bats for diagnostic purposes.</p>
<p>For warning about the bats, it is also the same logic as for bottomless pits: If one of the connected caves have bats in them, you print out <code>"You hear flapping!"</code>.</p>
<div class="program">
<p>Put your code into <em>code08.py</em>.</p>
</div>
</div>
<div id="player-gets-transported-by-bats-to-a-random-cave" class="section level2" number="9.15">
<h2>
<span class="header-section-number">9.15</span> Player gets transported by bats to a random cave<a class="anchor" aria-label="anchor" href="#player-gets-transported-by-bats-to-a-random-cave"><i class="fas fa-link"></i></a>
</h2>
<p>If the player is in the cave with bats, they transport them to a <em>random</em> cave, <em>irrespective</em> of whether the cave is occupied or not (so, any cave is a valid cave). Thus, bats can carry the player to a cave:</p>
<ol style="list-style-type: decimal">
<li>with another bat colony and it will transport the player again.</li>
<li>with a bottomless pit and the player will fall into it.</li>
<li>later on, to the cave with the Wumpus (the player may not survive that one and you don’t implement this now).</li>
</ol>
<p>Think about:</p>
<ol style="list-style-type: decimal">
<li>
<em>when</em> you check for bats presence (before or after checking for a bottomless pit?),</li>
<li>do you check once (using <code>if</code>) or one-or-more times (using <code>while</code>)</li>
</ol>
<p>Test your code by walking into a cave with bats (print their location at the start, so you know where to go).</p>
<div class="program">
<p>Put your code into <em>code09.py</em>.</p>
</div>
</div>
<div id="adding-wumpus-and-getting-eaten-by-it." class="section level2" number="9.16">
<h2>
<span class="header-section-number">9.16</span> Adding Wumpus (and getting eaten by it).<a class="anchor" aria-label="anchor" href="#adding-wumpus-and-getting-eaten-by-it."><i class="fas fa-link"></i></a>
</h2>
<p>By now you have added a player (single, location stored as in integer), bottomless pits (plural, locations stored in a set), and bats (plural as well). Add Wumpus!</p>
<ol style="list-style-type: decimal">
<li>Create a new variable (<code>wumpus</code>?) and place Wumpus in a vacant cave. Print out location of Wumpus for debugging purposes.</li>
<li>Warn about Wumpus in the same code that warns about pits and bats. Logic is the same but the check is simpler as you have just a single Wumpus location to worry about. Canonical warning text is <code>"You smell a Wumpus!"</code>.</li>
<li>Check if player is in the same cave as Wumpus. If that is the case, game is over, as the player is eaten by a hungry Wumpus. This is similar to <em>game-over</em> due to falling into a bottomless pit. Think about whether the check should before or after check for bats.</li>
</ol>
<p>Test your code by walking into a cave with Wumpus (print their location at the start, so you know where to go).</p>
<div class="program">
<p>Put your code into <em>code10.py</em>.</p>
</div>
</div>
<div id="giving-player-a-chance." class="section level2" number="9.17">
<h2>
<span class="header-section-number">9.17</span> Giving player a chance.<a class="anchor" aria-label="anchor" href="#giving-player-a-chance."><i class="fas fa-link"></i></a>
</h2>
<p>Let us give player a chance. As they enter the cave with the Wumpus, they startle it. Then, Wumpus either runs away to a random adjacent cave (new) or stays put and eats the player. First, create a new constant that defines a probability that Wumpus runs away, e.g. <code>P_WUMPUS_SCARED</code>. In implementations I’ve found, it is typically 0.25, but use any value you feel is reasonable.</p>
<p>Thus, if the player is in the cave with Wumpus, draw a random number between 0 and 1 (use <a href="https://docs.python.org/3/library/random.html#random.uniform">uniform</a> function for that). It is part of <a href="https://docs.python.org/3/library/random.html">random</a> library, so the call is <code>random.uniform(...)</code>. Remember that you can either import the <em>entire</em> library and then call its function by prefixing them with the library name or you can import only a specific function via <code>from ... import ...</code>. Once you generated the number between 0 and 1, if that number is <em>smaller</em> than probability that the Wumpus is scared, move it to a random adjacent cave (bats ignore Wumpus and it clings to the ceiling of the caves, so bottomless pits are not a problem for it). A useful function that you already used is <a href="https://docs.python.org/3/library/random.html#random.choice">choice()</a>, again, part of <a href="https://docs.python.org/3/library/random.html">random</a> library. Otherwise, if Wumpus was not scared off, the player is eaten and game is over (the only outcome in <em>code10</em>).</p>
<div class="program">
<p>Put your code into <em>code11.py</em>.</p>
</div>
</div>
<div id="flight-of-a-crooked-arrow" class="section level2" number="9.18">
<h2>
<span class="header-section-number">9.18</span> Flight of a crooked arrow<a class="anchor" aria-label="anchor" href="#flight-of-a-crooked-arrow"><i class="fas fa-link"></i></a>
</h2>
<p>Our player is armed with <em>crooked</em> arrows that can fly through caves. The rules for its flight are the following:</p>
<ul>
<li>The player decide in which cave it shoots an arrow and how far the arrow flies (from 1 up to 5 caves).</li>
<li>Every time the arrow needs to flight into a next cave, that cave is picked randomly from adjacent caves <em>excluding</em> the cave it came from (so, the arrow cannot make a 180° turn and there are only two out of three caves available for choosing).</li>
<li>If the arrow flies into a cave with Wumpus, it is defeated and the game is won.</li>
<li>If the arrow flies into a cave with the player, then they committed unintentional suicide and the game is lost.</li>
<li>If the arrow reached its last cave (based on how far the player wanted to shoot) and the cave is empty, it drops down on the floor.</li>
<li>Bats or bottomless pits have no effect on the arrow.</li>
</ul>
<p>The total number of arrows the player has at the beginning should be defined in <code>ARROWS_NUMBER</code> constant (e.g., <code>5</code>).</p>
<p>To keep track of the arrow, you will need following variables:</p>
<ul>
<li>
<code>arrow</code>: current location of the arrow.</li>
<li>
<code>arrow_previous_cave</code>: index of the cave the arrow came from, so that you know where it cannot flight back.</li>
<li>
<code>remaining_shooting_distance</code>: remaining distance to travel.</li>
<li>
<code>remaining_arrows</code>: number of remaining arrows (set to <code>ARROWS_NUMBER</code> when the game starts).</li>
</ul>
<p>Keep this scaffolding in mind and lets start programming our arrows.</p>
</div>
<div id="random-cave-but-no-u-turn" class="section level2" number="9.19">
<h2>
<span class="header-section-number">9.19</span> Random cave but no U-turn<a class="anchor" aria-label="anchor" href="#random-cave-but-no-u-turn"><i class="fas fa-link"></i></a>
</h2>
<p>You need to program a function (call it <code>next_arrow_cave()</code>) that picks a random cave but not the previous cave the arrow had been in. It should have two parameters:</p>
<ul>
<li>
<code>connected_caves</code>: a list of connected caves.</li>
<li>
<code>previous_cave</code>: cave from which the arrow came from.</li>
</ul>
<p>First, debug the code in a separate cell. Assume that <code>connected_caves = CONNECTED_CAVES[1]</code> (so, arrow is currently in cave 1) and <code>previous_cave = 0</code> (arrow came from cave 0). Write the code that will pick one of the remaining caves randomly (in this case, either <code>2</code> or <code>7</code>), you probably want to use set operations (as with placing game objects efficiently). Once the code works, turn it into a function that returns the next cave for an arrow. Document the function. Test it with for other combinations of connected and previous caves.</p>
<div class="program">
<p>Test your code in exercise #7.<br>
Once tested, put function into <em>utils.py</em>.</p>
</div>
</div>
<div id="going-distance" class="section level2" number="9.20">
<h2>
<span class="header-section-number">9.20</span> Going distance<a class="anchor" aria-label="anchor" href="#going-distance"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you have a function that flies to the next random cave, implement flying using a for loop. An arrow should fly through <code>shooting_distance</code> caves (set it to <code>5</code>, maximal distance, by hand for testing). The <em>first</em> cave is given (it will be picked by the player), so set <code>arrow</code> to <code>1</code> and <code>arrow_previous_cave</code> to <code>0</code> (player is in the cave <code>0</code> and shot the arrow into cave <code>1</code>). For debugging purposes, print out location of the arrow on each iteration. Test the code by changing <code>shooting_distance</code>. In particular, set it to <code>1</code>. The arrow should “fall down” already in cave <code>1</code>.</p>
<p>For this, used a stripped down version of the code with <code>CONNECTED_CAVES</code> constant, the imported <code>next_arrow_cave()</code> function, and all the relevant constants and variables for the arrow. Hard code initial cave, previous cave, and distance by hand.</p>
<div class="program">
<p>Put your code into <em>code12.py</em>.</p>
</div>
</div>
<div id="hitting-a-target" class="section level2" number="9.21">
<h2>
<span class="header-section-number">9.21</span> Hitting a target<a class="anchor" aria-label="anchor" href="#hitting-a-target"><i class="fas fa-link"></i></a>
</h2>
<p>Implement check for hitting the Wumpus or the player in the loop. Should the check be before or after the arrow flies to the next random cave? In both cases, write an appropriate “game over” message and break out of the loop. Test the code by placing Wumpus by hand into the cave the player is shooting at or the next one.</p>
<p>You can build on the code from the previous section but add <code>player_location</code> and <code>wumpus</code> variables hard coding them by hand for debugging. Run code multiple times to check that it works.</p>
<div class="program">
<p>Put your code into <em>code13.py</em>.</p>
</div>
</div>
<div id="move-or-shoot" class="section level2" number="9.22">
<h2>
<span class="header-section-number">9.22</span> Move or shoot?<a class="anchor" aria-label="anchor" href="#move-or-shoot"><i class="fas fa-link"></i></a>
</h2>
<p>We are almost where but before we can start putting the code together we need a few more things. For example, previously the player could only move, so we just asked for the next cave number. Now, on each turn, the player will have a choice of shooting an arrow or moving. Implement a function <code>input_shoot_or_move()</code> that has no parameters and returns <code>"s"</code> for shooting o <code>"m"</code> for moving. Inside, ask the player about their choice until they pick one of two valid options. Conceptually, this is very similar to your other input function <code>input_cave()</code> that repeatedly requests input until a valid one is given. Test and document!</p>
<div class="infobox program">
<p>Put <code>input_shoot_or_move()</code> into <em>utils.py</em><br>Test it in exercise 8.</p>
</div>
</div>
<div id="how-far" class="section level2" number="9.23">
<h2>
<span class="header-section-number">9.23</span> How far?<a class="anchor" aria-label="anchor" href="#how-far"><i class="fas fa-link"></i></a>
</h2>
<p>Implement <code>input_distance()</code> function that has no parameters and returns the desired shooting distance between <code>1</code> and <code>5</code>. Again, repeatedly ask for an <em>integer</em> number input (remember, you know how to check whether input is a valid integer) on how far the arrow should travel until valid input is given. This is very similar to your other input functions. Test and document.</p>
<div class="infobox program">
<p>Put <code>input_distance()</code> into <em>utils.py</em><br>Test it in exercise 9.</p>
</div>
</div>
<div id="input_cave_with_prompt" class="section level2" number="9.24">
<h2>
<span class="header-section-number">9.24</span> input_cave_with_prompt<a class="anchor" aria-label="anchor" href="#input_cave_with_prompt"><i class="fas fa-link"></i></a>
</h2>
<p>Create a new version of the <code>input_cave()</code> function called <code>input_cave_with_prompt</code> and add <code>prompt</code> parameter to it, so now we can ask either about moving to or shooting at the cave (hence, the need for the prompt in place of a hard-coded message).</p>
<div class="infobox program">
<p>Put <code>input_cave_with_prompt()</code> into <em>utils.py</em><br>Test it in exercise 10.</p>
</div>
</div>
<div id="putting-it-all-together" class="section level2" number="9.25">
<h2>
<span class="header-section-number">9.25</span> Putting it all together<a class="anchor" aria-label="anchor" href="#putting-it-all-together"><i class="fas fa-link"></i></a>
</h2>
<p>In the last few section, you have created all the bits and pieces that you need for the final game with a crooked arrow. Here is a pseudocode for how the final code should look like. Take a look to better understand how the new bits get integrated into the old code. By now, you should have following constants (you can have other values):</p>
<ul>
<li><code>CONNECTED_CAVES</code></li>
<li>
<code>NUMBER_OF_BATS</code> = 2</li>
<li>
<code>NUMBER_OF_BOTTOMLESS_PITS</code> = 2</li>
<li>
<code>P_WUMPUS_SCARED</code> = 0.25</li>
<li>
<code>ARROWS_NUMBER</code> = 5</li>
</ul>
<p>Following functions:</p>
<ul>
<li>
<code>find_vacant_cave(...)</code>, returns an integer cave index</li>
<li>
<code>input_cave_with_prompt(prompt, connected_cave)</code>, returns an integer cave index</li>
<li>
<code>input_shoot_or_move()</code>, returns <code>"s"</code> for shoot and <code>"m"</code> for move.</li>
<li>
<code>input_distance()</code>, returns an integer between 1 and 5</li>
<li>
<code>next_arrow_cave(connected_caves, previous_cave)</code>, return an integer cave index</li>
</ul>
<p>Following variables:</p>
<ul>
<li>
<code>player_location</code> : cave index</li>
<li>
<code>bottomless_pit</code>: list of cave indexes</li>
<li>
<code>bats</code>: list of cave indexes</li>
<li>
<code>wumpus</code>: cave index</li>
<li>
<code>remaining_arrows</code>: integer number of remaining arrows</li>
</ul>
<p>Service/temporary variables:</p>
<ul>
<li>
<code>occupied_caves</code>: list of cave indexes</li>
<li>
<code>gameover_due_to_arrow</code> : indicates whether game is over because either Wumpus or player was hit by an arrow</li>
<li>
<code>arrow</code>: location of an arrow initially based on the player’s choice</li>
<li>
<code>shooting_distance</code>: number of caves the arrow should fly through.</li>
<li>other arrow related temporary variables</li>
</ul>
<pre><code>import libraries that you need

import functions that you need from utils

define CONSTANTS

place player, bottomless pits, bats, and wumpus
set number of remaining arrows to ARROWS_NUMBER
set gameover_due_to_arrow variable to False

while TRUE:
    while player wants to shoot and has arrows:
        ask about cave that player want to shoot at  (store answer in `arrow` variable)
        ask how the far the arrow should fly (store answer in `shooting_distance` variable)
        
        fly arrow through caves in for loop:
            if hit wumpus -&gt; congrats game over message, gameover_due_to_arrow = True, and break out of the loop
            if hit player -&gt; oops game over message, gameover_due_to_arrow = True, and break out of the loop
            move arrow to the next random cave (next_arrow_cave function and arrow variable)
        decrease number of remaining arrows (remaining_arrows variable)
        
    check if game is over due to arrow, break out of the loop, if that is the case
        
    ask player about the cave he want to go to and move player
    
    while player is in the cave with bats: 
        move player to a random cave
    
    check for bottomless pits (player dies, break out of the loop)
    
    if player is in the same cave as wumpus:
        if wumpus is scared
            move wumpus to a random cave
        otherwise
            player is dead, break out of the loop</code></pre>
<div class="infobox program">
<p>Put your code into <em>code13.py</em>.</p>
</div>
</div>
<div id="wrap-up" class="section level2" number="9.26">
<h2>
<span class="header-section-number">9.26</span> Wrap up<a class="anchor" aria-label="anchor" href="#wrap-up"><i class="fas fa-link"></i></a>
</h2>
<p>Well done, that was a real adventure exploring these caves!</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="One-armed-bandit.html"><span class="header-section-number">8</span> One-armed bandit but with lists and loops</a></div>
<div class="next"><a href="guess-the-animal.html"><span class="header-section-number">10</span> Guess the animal</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#hunt-the-wumpus"><span class="header-section-number">9</span> Hunt the Wumpus</a></li>
<li><a class="nav-link" href="#chapter-concepts-1"><span class="header-section-number">9.1</span> Chapter concepts</a></li>
<li><a class="nav-link" href="#a-system-of-caves"><span class="header-section-number">9.2</span> A system of caves</a></li>
<li><a class="nav-link" href="#wandering-around"><span class="header-section-number">9.3</span> Wandering around</a></li>
<li><a class="nav-link" href="#checking-whether-a-value-is-in-the-listin-collection"><span class="header-section-number">9.4</span> Checking whether a value is in the list[#in-collection]</a></li>
<li><a class="nav-link" href="#checking-valid-cave-index"><span class="header-section-number">9.5</span> Checking valid cave index</a></li>
<li><a class="nav-link" href="#checking-that-string-can-be-converted-to-an-integer"><span class="header-section-number">9.6</span> Checking that string can be converted to an integer</a></li>
<li><a class="nav-link" href="#checking-valid-integer-input"><span class="header-section-number">9.7</span> Checking valid integer input</a></li>
<li><a class="nav-link" href="#encapsulating-the-code-in-a-function"><span class="header-section-number">9.8</span> Encapsulating the code in a function</a></li>
<li><a class="nav-link" href="#sets"><span class="header-section-number">9.9</span> Sets</a></li>
<li><a class="nav-link" href="#keeping-track-of-occupied-caves"><span class="header-section-number">9.10</span> Keeping track of occupied caves</a></li>
<li><a class="nav-link" href="#placing-bottomless-pits"><span class="header-section-number">9.11</span> Placing bottomless pits</a></li>
<li><a class="nav-link" href="#falling-into-a-bottomless-pit"><span class="header-section-number">9.12</span> Falling into a bottomless pit</a></li>
<li><a class="nav-link" href="#warning-about-a-bottomless-pit"><span class="header-section-number">9.13</span> Warning about a bottomless pit</a></li>
<li><a class="nav-link" href="#placing-bats-and-warning-about-them"><span class="header-section-number">9.14</span> Placing bats and warning about them</a></li>
<li><a class="nav-link" href="#player-gets-transported-by-bats-to-a-random-cave"><span class="header-section-number">9.15</span> Player gets transported by bats to a random cave</a></li>
<li><a class="nav-link" href="#adding-wumpus-and-getting-eaten-by-it."><span class="header-section-number">9.16</span> Adding Wumpus (and getting eaten by it).</a></li>
<li><a class="nav-link" href="#giving-player-a-chance."><span class="header-section-number">9.17</span> Giving player a chance.</a></li>
<li><a class="nav-link" href="#flight-of-a-crooked-arrow"><span class="header-section-number">9.18</span> Flight of a crooked arrow</a></li>
<li><a class="nav-link" href="#random-cave-but-no-u-turn"><span class="header-section-number">9.19</span> Random cave but no U-turn</a></li>
<li><a class="nav-link" href="#going-distance"><span class="header-section-number">9.20</span> Going distance</a></li>
<li><a class="nav-link" href="#hitting-a-target"><span class="header-section-number">9.21</span> Hitting a target</a></li>
<li><a class="nav-link" href="#move-or-shoot"><span class="header-section-number">9.22</span> Move or shoot?</a></li>
<li><a class="nav-link" href="#how-far"><span class="header-section-number">9.23</span> How far?</a></li>
<li><a class="nav-link" href="#input_cave_with_prompt"><span class="header-section-number">9.24</span> input_cave_with_prompt</a></li>
<li><a class="nav-link" href="#putting-it-all-together"><span class="header-section-number">9.25</span> Putting it all together</a></li>
<li><a class="nav-link" href="#wrap-up"><span class="header-section-number">9.26</span> Wrap up</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/alexander-pastukhov/learning-python-by-writing-games-de/blob/master/07-hunt-the-wumpus-eng.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/alexander-pastukhov/learning-python-by-writing-games-de/edit/master/07-hunt-the-wumpus-eng.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Lerne Python, indem du Spiele entwickels</strong>" was written by Alexander (Sasha) Pastukhov. It was last built on 2023-10-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Please note that this website collects anonymized data via Google analytics. This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
